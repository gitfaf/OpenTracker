@model List<OpenTracker.Models.Tracker.TorrentModel>

@{
	Layout = null;
}

<!DOCTYPE html>

<html>
	<head>
		<title>Index</title>


	<script src="@Url.Content("~/Content/js/jquery-1.4.4.min.js")" type="text/javascript"></script>

	<script type="text/javascript">

	    $(document).ready(function () {

	        $('#30').click(function (event) {
	            
	            $.getJSON('@Url.Action("RetrieveTorrentFiles", "Browse")?torrentid=30', function (data) {
	                var items = [];

	                // items.push('<li>' + data + '</li>');
	                $.each(data.files, function (i, file) {
	                    // $("<img>").attr("src", file.filename).appendTo("#images");
	                    items.push('<li>' + file.filename + ' ' + file.size + '</li>');
	                });

	                $('<ul/>', {
	                    'class': 'my-new-list',
	                    html: items.join('')
	                }).appendTo('#json_files');
	            });
	            
	        });


	    });

	    function retrievejson(torrentid) {
	        $("#json_files").empty();
	        $.getJSON('@Url.Action("RetrieveTorrentFiles", "Browse")?torrentid=' + torrentid, function (data) {
	            var items = [];

	            // items.push('<li>' + data + '</li>');
	            $.each(data.files, function (i, file) {
	                // $("<img>").attr("src", file.filename).appendTo("#images");
	                items.push('<li>' + file.filename + ' ' + file.filesize + '</li>');
	            });

	            $('<ul/>', {
	                'class': 'my-new-list',
	                html: items.join('')
	            }).appendTo('#json_files');
	        });
	    }
	    
	    
	</script>
	</head>
	<body>
		<div>
			
		</div>

<script>
</script>
		<div>
		
<table width="100%" height="100%" style="border: 1px solid #000;">
	<tr>
		<td>category</td>
		<td>torrent name</td>
		<td id="files">files</td>
		<td>comments</td>
		<td>size</td>
		<td>snatches</td>
		<td>seeders</td>
		<td>leechers</td>
		<td>uploader</td>
	</tr>

@{
	if (Model.Count == 0)
	{
		<p>Sry, no torrents yet. LOLS.</p>
	}
	else
	{
		foreach (var torrent in Model)
		{
			var size = OpenTracker.Core.Common.Calculation.FormatBytes(torrent.Size);
			
			<tr onclick="retrievejson(@torrent.TorrentId)">
				<td>@torrent.CategoryId</td>
				<td><a href="/download/@torrent.TorrentId/">@torrent.TorrentName</a></td>
				<td>@torrent.FileCount</td>
				<td>@torrent.CommentCount</td>
				<td>@size</td>
				<td>@torrent.Snatches</td>
				<td>@torrent.Seeders</td>
				<td>@torrent.Leechers</td>
				<td>@torrent.Uploader</td>
			</tr>
		}
		
		
		
	}
}
</table>
<div id="json_files"></div>

		</div>


	</body>
</html>
